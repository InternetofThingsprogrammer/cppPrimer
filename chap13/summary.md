#

## 小节

&emsp; &emsp;每个类都会控制该类型对象拷贝、移动、赋值以及销毁时发生什么。特殊的成员函数————拷贝构造函数、移动构造函数、拷贝赋值运算符、移动赋值运算符和析构函数定义了这些操作。移动构造函数和移动赋值运算符接受一个（通常是非 const 的）右值引用；而拷贝版本则接受一个（通常是 const 的）普通左值引用。  

&emsp; &emsp;如果一个类未声明这些操作，编译器会自动为其生成。如果这些操作未定义成删除的，它们会逐成员初始化、移动、赋值或销毁对象：合成的操作依次处理每个非 static 数据成员。根据成员类型决定如何拷贝、移动、赋值或销毁它。  

&emsp; &emsp;分配了内存或其它资源的类几乎总是需要定义拷贝控制成员来管路分配的资源。如果一个类需要析构函数，则它几乎肯定也需要定义移动和拷贝构造函数以及移动和拷贝赋值运算符。  

## 术语表

**拷贝并交换（copy and swap）** 涉及赋值运算符的技术，首先拷贝右侧运算对象，然后调用 swap 来交换副本和左侧运算对象。  

**拷贝赋值运算符（copy-assignment operator）** 接受一个本类型对象的赋值运算符版本。通常，拷贝赋值运算符的参数是一个 const 的引用，并返回指向本对象的引用。如果类未显式定义拷贝赋值运算符，编译器会为它合成一个。  

**拷贝构造函数（copy constructor）** 一种构造函数，将新对象初始化为同类型另一个对象的副本。当向函数传递对象，或以传值的方式从函数返回对象时，会隐式使用拷贝构造函数。如果我们未提供拷贝构造函数，编译器会为我们合成一个。  

**拷贝控制（copy control）** 特殊的成员函数，控制拷贝、移动、赋值以及销毁本类类型对象时发生什么。如果类未定义这些操作，编译器会为它合成恰当的定义。  

**拷贝初始化（copy initialization）** 一种初始化形式，当我们使用 = 为新创建的对象提供初始化器时，会使用拷贝初始化。如果我们向函数传递对象或以传值的方式从函数返回对象，以及初始化一个数组或一个聚合类时，也会使用拷贝初始化。  

**删除的函数（deleted function）** 不能使用的函数。我们在一个函数的声明上指定 =delete 来删除它。删除的函数的一个常见的用途是告诉编译器不要为类合成拷贝和/或移动操作。  

**析构函数（destructor）** 特殊的成员函数，当对象离开作用域或被释放时进行清理工作。编译器会自动销毁每个数据成员。类类型的成员通过调用其析构函数来销毁；而内置类型或复合类型的成员的销毁则不需要做任何工作。特别是，析构函数不会释放指针成员指向的对象。  

**左值引用（lvalue reference）** 可以绑定到左值的引用。  

**逐成员拷贝/赋值（memberwise copy/assign）** 合成的拷贝与移动构造函数以及拷贝与移动赋值运算符的工作方式。合成的拷贝或移动构造函数依次处理每个非 static 数据成员，通过从给定对象拷贝或移动成员来初始化本对象成员；拷贝或移动赋值运算符从右侧运算对象中将每个成员拷贝赋值或移动赋值到左侧运算对象中。内置类型或复合类型直接进行初始化或赋值。类类型的成员通过成员对应的拷贝/移动构造函数或者拷贝/移动赋值运算符进行初始化或赋值。  

**move** 用来将一个右值 引用绑定到左值的标准库函数。调用 move 隐含地承诺我们将不会在使用移后源对象，除了销毁它或赋予它一个新值之外。  

**移动赋值运算符（move-assignment operator）** 接受一个本类型右值引用参数地赋值运算符版本。通常，移动赋值运算符将数据从右侧运算对象移动到左侧运算对象。赋值之后，对右侧运算对象执行析构函数必须是安全的。  

**移动构造函数（move constructor）** 一种构造函数，接受一个本类型的右值引用。通常，移动构造函数将数据从其参数移动到新创建的对象中。移动之后，对给定的实参执行析构函数必须是安全的。  

**移动迭代器（move iterator）** 迭代器适配器，它生成的迭代器在解引用时会得到一个右值引用。  

**重载运算符（overloaded operator）** 一种函数，重定义了运算符应用于类类型的对象时的含义。本章介绍了如何定义赋值运算符；第 14 章中将介绍重载运算符的更多细节内容。  

**引用计数（reference count）** 一种程序设计计数，通常用于拷贝控制成员的设计。引用计数记录了右多少对象共享状态。构造函数（不是拷贝/移动构造函数）将引用计数置为 1。每当创建一个新副本时，计数值递增。当一个对象被销毁时，计数值递减。赋值运算符和析构函数检查递减的引用计数是否为 0，如果是，它们会销毁对象。  

**引用限定符（reference qualifier）** 用来指出一个非 static 成员函数可以用于左值或右值的符号。限定符 & 和 && 应该放在参数列表之后或 const 限定符之后（如果有的话）。被 & 限定的函数只能用于左值；被 && 限定的函数只能用于右值。  

**右值引用（rvalue reference）** 指向一个将要销毁的对象的引用。  

**合成赋值运算符（synthesized assignment opeartor）** 编译器为未显式定义赋值运算符的类创建的（合成的）拷贝或移动赋值运算符版本。除非定义为删除的，合成赋值运算符会逐成员地将右侧运算对象赋予（移动到）左侧运算对象。  

**合成拷贝/移动构造函数（synthesized copy/move constructor）** 编译器为未显示定义对应构造函数的类生成的拷贝/移动构造函数版本。除非定义为删除的，合成拷贝或移动构造函数分别从给定对象拷贝或移动成员来逐成员地初始化新对象。  

**合成析构函数（synthesized destructor）** 编译器为未显示定义析构函数地类创建（合成）的版本。合成析构函数的函数体为空。  
